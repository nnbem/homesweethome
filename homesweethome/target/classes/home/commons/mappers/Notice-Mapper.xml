<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Notice-Mapper">

   <sql id="search">
      <if test="searchType == 't'.toString()">
         where title like '%'||#{keyword}||'%'
      </if>
   </sql>

   <select id="selectSearchNoticeList" resultType="notice">
      select *
      from notice
      <include refid="search" />
      order by regDate desc
   </select>
   
   <select id="selectSearchNoticeListCount" parameterType="pageMaker" resultType="int">
      select count (*)
      from notice
      where nno is not null
      <include refid="search"/>
   </select>
   
   <select id="selectNoticeByNno" parameterType="pageMaker" resultType="int">
      select *
      from notice
      where nno = #{nno}
      
   </select>
   
   <insert id="insertnotice" parameterType="notice">
      insert into 
      notice(nno, title)
      values (#{nno}, #{title})
   </insert>
   
   <update id="updateNotice" parameterType="notice">
      update notice
      set title = #{title}, content = #{content}, upload_Date = sysdate
      where nno = #{nno}
   </update>
   
   <delete id="deleteNotice" parameterType="int">
      delete
      from notice
      where nno = #{nno};
   </delete>
   
   <update id="increaseViewCnt" parameterType="int">
      update notice
      set viewcnt = viewcnt+1
      where nno = #{nno}
   </update>
   
   <select id="selectNoticeSeqNext" resultType="int">
      select notice_seq.nextval as nno from dual   
   </select>
   
   <select id="selectNoticeByViewCnt" parameterType="int" resultType="map">
       SELECT * 
       FROM notice
       WHERE viewcnt = #{viewCnt}
   </select>
   
   
</mapper>